(this.webpackJsonpkameleoon=this.webpackJsonpkameleoon||[]).push([[0],{33:function(e,t,n){e.exports={loader__container:"Loader_loader__container__32BSH",loader:"Loader_loader__1kK-T",rotate:"Loader_rotate__1VJVf"}},42:function(e,t,n){},43:function(e,t,n){e.exports={results:"MyButton_results__wMPjt",reset:"MyButton_reset__3qnVL",finalize:"MyButton_finalize__1-aPQ"}},46:function(e,t,n){e.exports={button:"BackButton_button__qN9za"}},53:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(24),c=n.n(s),a=(n(53),n(28)),i=n(15),o=n(16),u=n(6),d=n(29),j=function(e){var t=e.tests,n=e.config,s=e.query,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(r.useState)(t),s=Object(a.a)(n,2),c=s[0],i=s[1];return{items:Object(r.useMemo)((function(){var t=Object(d.a)(e);return null!==c&&t.sort((function(e,t){return e[c.key]<t[c.key]?"ascending"===c.direction?-1:1:e[c.key]>t[c.key]?"ascending"===c.direction?1:-1:0})),t}),[e,c]),requestSort:function(e){var t="ascending";c&&c.key===e&&"ascending"===c.direction&&(t="descending"),i({key:e,direction:t})},sortConfig:c,setSortConfig:i}}(t,n),i=c.items,o=c.requestSort,u=c.sortConfig,j=c.setSortConfig;return{sortedAndSearchedTests:Object(r.useMemo)((function(){return i.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())}))}),[s,i]),requestSort:o,sortConfig:u,setSortConfig:j}},l=(n(57),n(2)),b=function(e){var t=e.testsCount,n=e.handleChange,r=e.value;return Object(l.jsxs)("div",{className:"searchString",children:[Object(l.jsx)("input",{className:"searchString__input",type:"text",placeholder:"What test are you looking for ?",value:r,onChange:function(e){return n(e.target.value)}}),Object(l.jsx)("span",{className:"searchString__result",children:"".concat(t,1===t?" test":" tests")})]})},O=(n(59),n(17)),h=n(42),f=n.n(h),p=n(43),x=n.n(p),y=function(e){var t=e.children,n=e.handleClick;return Object(l.jsx)("button",{className:x.a[t],onClick:n,children:t})},m=n(44),_=n.n(m),v=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},g=function(e){var t=e.testId,n=e.testName,r=e.testType,s=e.testStatus,c=e.siteId,a=e.site,i=Object(u.f)(),o=_.a.bind(f.a),d=o(Object(O.a)({row__name:!0},"siteId".concat(c),!0)),j=o(Object(O.a)({row__status:!0},"".concat(s.toLowerCase()),!0)),b="DRAFT"===s?"finalize":"results";return Object(l.jsxs)("tr",{className:"table__row",children:[Object(l.jsx)("td",{className:d,children:n}),Object(l.jsx)("td",{className:"row__type",children:r.length>4?v(r).replace("_","-"):r}),Object(l.jsx)("td",{className:j,children:v(s)}),Object(l.jsx)("td",{className:"row__site",children:Object(l.jsx)("a",{href:"http://".concat(a),children:a})}),Object(l.jsx)("td",{className:"row__button",children:Object(l.jsx)(y,{handleClick:function(){i.push("/".concat(b,"/").concat(t))},children:b})})]})},S=(n(62),function(e){var t=e.resetQuery;return Object(l.jsxs)("div",{className:"emptyResult",children:[Object(l.jsx)("h2",{children:"Your search did not match any results."}),Object(l.jsx)(y,{handleClick:t,children:"reset"})]})}),N=n(33),C=n.n(N),k=function(){return Object(l.jsx)("div",{className:C.a.loader__container,children:Object(l.jsx)("div",{className:C.a.loader})})},w=(n(63),function(){return Object(l.jsx)("div",{className:"loadError",children:Object(l.jsx)("h2",{children:"Loading error"})})}),I=function(e){var t=e.tests,n=e.requestSort,r=e.getClassNameFor,s=e.resetQuery,c=Object(i.c)((function(e){return e.tests.isLoading})),a=Object(i.c)((function(e){return e.tests.error}));return c?Object(l.jsx)(k,{}):a?Object(l.jsx)(w,{}):0===t.length?Object(l.jsx)(S,{resetQuery:s}):Object(l.jsx)("div",{className:"dashboard",children:Object(l.jsxs)("table",{children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:Object(l.jsx)("span",{onClick:function(){return n("name")},className:r("name"),children:"name"})}),Object(l.jsx)("th",{children:Object(l.jsx)("span",{onClick:function(){return n("type")},className:r("type"),children:"type"})}),Object(l.jsx)("th",{children:Object(l.jsx)("span",{onClick:function(){return n("statusSort")},className:r("statusSort"),children:"status"})}),Object(l.jsx)("th",{children:Object(l.jsx)("span",{onClick:function(){return n("site")},className:r("site"),children:"site"})}),Object(l.jsx)("th",{})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsx)(g,{testId:e.id,testName:e.name,testType:e.type,testStatus:e.status,siteId:e.siteId,site:e.site},e.id)}))})]})})},T=function(e){var t=e.sortedAndSearchedTests,n=e.requestSort,r=e.sortConfig,s=e.setSortConfig,c=e.query,a=e.setQuery;return Object(l.jsxs)("div",{className:"dashboard__page",children:[Object(l.jsx)("h1",{children:"Dashboard"}),Object(l.jsx)(b,{testsCount:t.length,handleChange:function(e){a(e)},value:c}),Object(l.jsx)(I,{tests:t,requestSort:n,getClassNameFor:function(e){if(r)return r.key===e?r.direction:void 0},resetQuery:function(){a(""),s(null)}})]})},L=n(46),E=n.n(L),q=function(){return Object(l.jsx)("div",{className:E.a.button,children:"Back"})},A=(n(64),function(){return Object(l.jsxs)("div",{className:"finalizePage",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Finalize"}),Object(l.jsx)("span",{children:"Spring promotion"})]}),Object(l.jsx)(o.b,{to:"/",className:"link",children:Object(l.jsx)(q,{})})]})}),D=(n(65),function(){return Object(l.jsxs)("div",{className:"resultsPage",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Results"}),Object(l.jsx)("span",{children:"Order basket redesign"})]}),Object(l.jsx)(o.b,{to:"/",className:"link",children:Object(l.jsx)(q,{})})]})}),B="SET_IS_LOADING",F="TESTS_LOADING_FAILURE",z="TESTS_LOADING_SUCCESS",P="FETCH_TESTS";var Q=function(){var e=Object(i.b)(),t=Object(r.useState)(""),n=Object(a.a)(t,2),s=n[0],c=n[1],d=Object(i.c)((function(e){return e.tests.tests})),b=Object(i.c)((function(e){return e.sites.sites})),O={ONLINE:1,PAUSED:2,STOPPED:3,DRAFT:4},h=d.map((function(e){return{id:e.id,name:e.name,type:e.type,status:e.status,siteId:e.siteId,statusSort:O[e.status],site:b[e.siteId]}})),f=j({tests:h,query:s}),p=f.sortedAndSearchedTests,x=f.requestSort,y=f.sortConfig,m=f.setSortConfig;return Object(r.useEffect)((function(){e({type:P})}),[]),Object(l.jsx)(o.a,{children:Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{exact:!0,path:"/",children:Object(l.jsx)(T,{sortedAndSearchedTests:p,requestSort:x,sortConfig:y,setSortConfig:m,query:s,setQuery:c})}),Object(l.jsx)(u.a,{exact:!0,path:"/results/:id",children:Object(l.jsx)(D,{})}),Object(l.jsx)(u.a,{exact:!0,path:"/finalize/:id",children:Object(l.jsx)(A,{})})]})})},R=n(48),M=n(18),U=n(9),G="SITE_LOADING_FAILURE",J="SET_SITES",V=/^https:\/\/www.|^https:\/\/|^http:\/\//,H={sites:{},error:null},K={tests:[],isLoading:!1,error:null},W=Object(M.b)({tests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(U.a)(Object(U.a)({},e),{},{isLoading:t.payload});case z:return Object(U.a)(Object(U.a)({},e),{},{tests:Object(d.a)(t.payload)});case F:return Object(U.a)(Object(U.a)({},e),{},{error:t.payload});default:return e}},sites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(U.a)(Object(U.a)({},e),{},{sites:Object(U.a)(Object(U.a)({},e.sites),{},Object(O.a)({},t.payload.id,t.payload.url.replace(V,"")))});case G:return Object(U.a)(Object(U.a)({},e),{},{error:t.payload});default:return e}}}),Y=n(13),X=n.n(Y),Z=n(7),$=n(47),ee=n.n($).a.create({baseURL:"  http://localhost:3100"}),te=function(){return ee.get("/tests")},ne=function(e){return ee.get("/sites/".concat(e))},re=X.a.mark(ce),se=X.a.mark(ae);function ce(){var e;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Z.c)({type:B,payload:!0});case 2:return t.prev=2,t.next=5,Object(Z.b)(te);case 5:return e=t.sent,t.next=8,Object(Z.c)({type:z,payload:e.data});case 8:t.next=16;break;case 10:return t.prev=10,t.t0=t.catch(2),t.next=14,Object(Z.c)({type:F,payload:t.t0});case 14:return t.next=16,Object(Z.c)({type:B,payload:!1});case 16:case"end":return t.stop()}}),re,null,[[2,10]])}function ae(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(P,ce);case 2:case"end":return e.stop()}}),se)}var ie=X.a.mark(de),oe=X.a.mark(je),ue=[];function de(e){var t;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.payload.forEach((function(e){ue.includes(e.siteId)||ue.push(e.siteId)}));case 2:return n.next=4,Object(Z.a)(ue.map((function(e){try{return Object(Z.b)(ne,e)}catch(t){return Object(Z.c)({type:G,payload:t})}})));case 4:return t=n.sent,n.next=7,Object(Z.a)(t.map((function(e){return Object(Z.c)({type:J,payload:e.data})})));case 7:return n.next=9,Object(Z.c)({type:B,payload:!1});case 9:case"end":return n.stop()}}),ie)}function je(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)(z,de);case 2:case"end":return e.stop()}}),oe)}var le=X.a.mark(be);function be(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)([ae(),je()]);case 2:case"end":return e.stop()}}),le)}var Oe=Object(R.a)(),he=Object(M.d)(W,Object(M.a)(Oe));Oe.run(be),c.a.render(Object(l.jsx)(i.a,{store:he,children:Object(l.jsx)(Q,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.ff6ddeb1.chunk.js.map